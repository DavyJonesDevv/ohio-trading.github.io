<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ohio Trades â€” Dark Bunker Index</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <canvas id="particles"></canvas>

  <div class="scanlines"></div>
  <div class="noise"></div>

  <header class="glitch" data-text="OHIO TRADING INDEX">OHIO TRADING INDEX</header>

  <main>
    <section class="panel">
      <h2>Trade Calculator</h2>
      <p>Enter a trade like: <code>AK47 + M4A1 for Deagle</code></p>

      <textarea id="tradeInput" placeholder="Type trade here..."></textarea>
      <button id="calcBtn">Calculate</button>

      <div id="result" class="result"></div>
    </section>

    <section class="panel">
      <h2>Vault Viewer</h2>
      <input id="vaultUser" placeholder="Enter username..." />
      <button id="vaultBtn">Check Vault</button>
      <div id="vaultResult" class="result"></div>
    </section>
  </main>

  <script src="skins.js"></script>
  <script>
    // --- Particle Background ---
    const canvas = document.getElementById("particles");
    const ctx = canvas.getContext("2d");
    function resize() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    resize();
    window.onresize = resize;

    const particles = Array.from({ length: 80 }, () => ({
      x: Math.random() * canvas.width,
      y: Math.random() * canvas.height,
      vx: (Math.random() - 0.5) * 0.4,
      vy: (Math.random() - 0.5) * 0.4,
      size: Math.random() * 2 + 1,
    }));

    function drawParticles() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.fillStyle = "rgba(255,255,255,0.6)";

      particles.forEach(p => {
        p.x += p.vx;
        p.y += p.vy;
        if (p.x < 0) p.x = canvas.width;
        if (p.x > canvas.width) p.x = 0;
        if (p.y < 0) p.y = canvas.height;
        if (p.y > canvas.height) p.y = 0;
        ctx.fillRect(p.x, p.y, p.size, p.size);
      });

      requestAnimationFrame(drawParticles);
    }
    drawParticles();

    // --- Trade Calculator ---
    document.getElementById("calcBtn").onclick = () => {
      const input = document.getElementById("tradeInput").value;
      if (!input.trim()) return;

      const parts = input.split(/for/i);
      const give = parts[0].split(/\+|,/).map(s => s.trim()).filter(Boolean);
      const receive = parts[1]?.split(/\+|,/).map(s => s.trim()).filter(Boolean) || [];

      let giveValue = 0;
      let receiveValue = 0;

      give.forEach(g => giveValue += (skins[g.toLowerCase()] || 0));
      receive.forEach(r => receiveValue += (skins[r.toLowerCase()] || 0));

      const diff = receiveValue - giveValue;
      let verdict = diff > 0 ? "WIN" : diff < 0 ? "LOSS" : "FAIR";

      document.getElementById("result").innerHTML = `
        <strong>Giving:</strong> ${give.join(", ")} = ${giveValue}<br>
        <strong>Receiving:</strong> ${receive.join(", ")} = ${receiveValue}<br>
        <strong>Verdict:</strong> ${verdict}
      `;
    };

    // --- Vault Checker ---
    document.getElementById("vaultBtn").onclick = async () => {
      const user = document.getElementById("vaultUser").value.trim();
      if (!user) return;

      // Placeholder vault logic
      document.getElementById("vaultResult").innerHTML = `Vault for <b>${user}</b> not connected yet.`;
    };
  </script>
</body>
</html>
